{% load i18n %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% trans "–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç" %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
    <h1>{% trans "üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç" %}</h1>
    <div class="mb-4">
        <a href="{% url 'password_change' %}" class="btn btn-warning">{% trans "–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å" %}</a>
        <a href="{% url 'logout' %}" class="btn btn-danger">{% trans "–í—ã–π—Ç–∏" %}</a>
    </div>

    <div class="mb-4">
        <p><strong>{% trans "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" %}:</strong> {{ user.username }}</p>
        <p><strong>{% trans "Email" %}:</strong> {{ user.email }}</p>
    </div>

    <h2>{% trans "–ú–æ–∏ –±–∏–ª–µ—Ç—ã" %}</h2>
    <h5 class="text-muted">{% trans "–í—Å–µ–≥–æ –∫—É–ø–ª–µ–Ω–æ –±–∏–ª–µ—Ç–æ–≤" %}: {{ total_tickets }}</h5>

    {% if tickets %}
        <div class="row">
            {% for ticket in tickets %}
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">{{ ticket.event.title }}</h5>
                            <p><strong>{% trans "–ö–æ–ª-–≤–æ" %}:</strong> {{ ticket.quantity }}</p>
                            <p><strong>{% trans "–î–∞—Ç–∞" %}:</strong> {{ ticket.purchase_date }}</p>
                            {% if ticket.qr_code %}
                                <img src="{{ ticket.qr_code.url }}" width="100">
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>{% trans "–£ –≤–∞—Å –Ω–µ—Ç –±–∏–ª–µ—Ç–æ–≤." %}</p>
    {% endif %}
</body>
</html>
